(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[976],{9234:function(t,e,n){"use strict";n.d(e,{Z:function(){return DefaultFrame}});var o=n(5893),r=n(1798),a=n(1487),s=n(6068),i=n(7769),l=n(7294);function Toaster(){let[t,e]=(0,s.o)(i.n6),n=(0,l.useRef)(null),r=(0,l.useRef)(null);function dismissalHandler(){e(null)}return(0,l.useEffect)(()=>{let{current:e}=n,{current:o}=r;o&&e&&t&&o.show(e)},[t,n,r]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(a.J4,{ref:r}),(0,o.jsx)("div",{style:{display:"none"},children:(0,o.jsx)(a.DZ,{ref:n,variant:(null==t?void 0:t.variant)||"info",onMarketToastAutoDismissed:dismissalHandler,onMarketToastManuallyDismissed:dismissalHandler,children:null==t?void 0:t.text})})]})}var c=n(1036),u=n.n(c);function DefaultFrame(t){let{disclosure:e,children:n}=t,{t:a}=(0,r.$G)(),s=u()(e,{allowedTags:["a"],allowedAttributes:{a:["href","name","target"]},allowedSchemes:[],allowedSchemesByTag:{a:["http","https"]}});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(Toaster,{}),(0,o.jsx)("div",{style:{flex:"1 0 auto"},children:n}),(0,o.jsx)("div",{style:{flex:"0 1 auto"},children:(0,o.jsxs)("div",{className:"footer",children:[e&&(0,o.jsx)("p",{className:"paragraph-10 text-55-percent",dangerouslySetInnerHTML:{__html:s}}),(0,o.jsx)("p",{className:"paragraph-10 text-55-percent",children:a("all.footer.powered-by")})]})})]})}},7865:function(t,e,n){"use strict";n.d(e,{Z:function(){return MerchantLogo}});var o=n(5893),r=n(5675),a=n.n(r),s=n(1798);function MerchantLogo(t){let{src:e}=t,{t:n}=(0,s.$G)();return(0,o.jsx)("div",{className:"market-logo-container",style:{position:"relative",height:"64px",width:"64px"},children:(0,o.jsx)(a(),{src:e,alt:n("all.image.logo-alt"),width:"64",height:"64",style:{objectFit:"contain"}})})}},3044:function(t,e,n){"use strict";n.d(e,{jb:function(){return enroll},TG:function(){return enrollUnifiedFlow},Ki:function(){return getConsentCopiesFromConfig},oC:function(){return getEnrollmentStatus},MA:function(){return getEnrollmentStatusForUnifiedFlow},IE:function(){return getPrivacyDisclosureFromConfig}});var o=n(5578),r=n(8805),a=n(2934);function getSoftwareReleaseNumber(){return"d49723ca2999033f4efee7f08f43251d81615ac0"}var s=n(3394);let i={"fr-CA":["en-CA"],"ca-ES":["es-ES"]};var l=n(7050);async function getEnrollmentStatusForUnifiedFlow(t,e,n,i,c,u){let d="".concat((0,r.l)("squareup"),"/buyer-enrollment/").concat(n,"/status");try{let n=await fetch(d,{method:"POST",body:JSON.stringify({emailAddress:t,phoneNumber:e,recaptchaToken:i,recaptchaVersion:c}),headers:{"Content-Type":"application/json"}});if(!n.ok){if(404===n.status)return{isEnrolled:!1};if(422===n.status){let t=!0,e=u("error.generic"),r=!1;try{var f,h;let o=await n.json();(null==o?void 0:null===(f=o.error)||void 0===f?void 0:f.startsWith("Invalid phone number"))&&(r=!0,e=u("error.invalid-phone")),(null==o?void 0:null===(h=o.error)||void 0===h?void 0:h.startsWith("Invalid Recaptcha"))&&(t=!1)}catch(t){if(t instanceof SyntaxError&&"Unexpected end of JSON input"===t.message){let t=n.statusText;try{t=await n.text()}catch(t){}finally{(0,a.e)(new s.Z("Bad response: ".concat(n.status," ").concat(t)))}}else(0,a.e)(t)}if(t)throw new o.Z(e,{url:d,status:n.status,doNotReport:r});throw new l.Z("Invalid Recaptcha",{url:d,status:n.status,doNotReport:!0,version:c})}throw new o.Z(u("error.generic"),{url:d,status:n.status})}return n.json()}catch(t){throw(0,a.e)(t),t}}async function enrollUnifiedFlow(t,e,n,s,i,c,u,d){let f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"buyer-enroll-fe:".concat(getSoftwareReleaseNumber()),h="".concat((0,r.l)("squareup"),"/buyer-enrollment/").concat(n,"/join");try{let n=await fetch(h,{method:"POST",body:JSON.stringify({emailAddress:t,phoneNumber:e,copyIds:s,recaptchaToken:i,recaptchaVersion:c,contactToken:d,softwareReleaseNumber:f}),headers:{"Content-Type":"application/json"}}),r=!0;if(!n.ok){var p;let t=await n.json();if((null==t?void 0:null===(p=t.error)||void 0===p?void 0:p.startsWith("Invalid Recaptcha"))&&(r=!1),r)throw new o.Z(u("error.generic"),{url:h,status:n.status,doNotReport:!1});throw new l.Z("Invalid Recaptcha",{url:h,status:n.status,doNotReport:!0,version:c})}return n.json()}catch(t){throw(0,a.e)(t),t}}function getItemFromLocaleIndex(t,e){let{fallbacks:n,globalFallback:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=Object.keys(t||{}),a=function(t,e){let{fallbacks:n=i,globalFallback:o}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return[...function getFallbackChain(t,e,n){let o=[null==e?void 0:e[t]].flat().filter(Boolean),r=n||new Set;return r.has(t)?[]:(r.add(t),[t,...o.map(t=>getFallbackChain(t,e,r))].flat())}(t,n),o].find(t=>e.includes(t))}(e,r,{fallbacks:n,globalFallback:o})||r[0];return t[a]}function getConsentCopiesFromConfig(t,e,n){var o;if(!t.programs.includes(e))throw new s.Z("OptInConfig does not include ".concat(e));let r=null===(o=t.consentCopy)||void 0===o?void 0:o[e];if(!r)throw new s.Z("OptInConfig is missing consent copies for ".concat(e));return getItemFromLocaleIndex(r,n,{globalFallback:t.defaultLocale})}async function getEnrollmentStatus(t,e,n,i,c,u){let d={program:t,..."marketing"===t&&{emailAddress:e},..."loyalty"===t&&{phoneNumber:e},recaptchaToken:i,recaptchaVersion:c},f="".concat((0,r.l)("squareup"),"/buyer-enrollment/").concat(n,"/status");try{let t=await fetch(f,{method:"POST",body:JSON.stringify(d),headers:{"Content-Type":"application/json"}});if(!t.ok){if(404===t.status)return{isEnrolled:!1};if(422===t.status){let e=!0,n=u("error.generic"),r=!1;try{var h,p;let o=await t.json();(null==o?void 0:null===(h=o.error)||void 0===h?void 0:h.startsWith("Invalid phone number"))&&(r=!0,n=u("error.invalid-phone")),(null==o?void 0:null===(p=o.error)||void 0===p?void 0:p.startsWith("Invalid Recaptcha"))&&(e=!1)}catch(e){if(e instanceof SyntaxError&&"Unexpected end of JSON input"===e.message){let e=t.statusText;try{e=await t.text()}catch(t){}finally{(0,a.e)(new s.Z("Bad response: ".concat(t.status," ").concat(e)))}}else(0,a.e)(e)}if(e)throw new o.Z(n,{url:f,status:t.status,doNotReport:r});throw new l.Z("Invalid Recaptcha",{url:f,status:t.status,doNotReport:!0,version:c})}throw new o.Z(u("error.generic"),{url:f,status:t.status})}return t.json()}catch(t){throw(0,a.e)(t),t}}function getPrivacyDisclosureFromConfig(t,e,n){var o;let{withoutFallback:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.programs.includes(e))throw new s.Z("OptInConfig does not include ".concat(e));let a=null===(o=t.privacyDisclosureCopy)||void 0===o?void 0:o[e];return a?getItemFromLocaleIndex(a,n,{...r&&{fallbacks:{}},globalFallback:r?null:t.defaultLocale}):null}async function enroll(t,e,n,s,i,c,u,d){let f=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"buyer-enroll-fe:".concat(getSoftwareReleaseNumber()),h={program:t,..."marketing"===t&&{emailAddress:e},..."loyalty"===t&&{phoneNumber:e},copyIds:s,recaptchaToken:i,recaptchaVersion:c,contactToken:d,softwareReleaseNumber:f},p="".concat((0,r.l)("squareup"),"/buyer-enrollment/").concat(n,"/join");try{let t=await fetch(p,{method:"POST",body:JSON.stringify(h),headers:{"Content-Type":"application/json"}}),e=!0;if(!t.ok){var v;let n=await t.json();if((null==n?void 0:null===(v=n.error)||void 0===v?void 0:v.startsWith("Invalid Recaptcha"))&&(e=!1),e)throw new o.Z(u("error.generic"),{url:p,status:t.status,doNotReport:!1});throw new l.Z("Invalid Recaptcha",{url:p,status:t.status,doNotReport:!0,version:c})}return t.json()}catch(t){throw(0,a.e)(t),t}}},7050:function(t,e,n){"use strict";n.d(e,{Z:function(){return InvalidRecaptchaError}});var o=n(5578);let InvalidRecaptchaError=class InvalidRecaptchaError extends o.Z{constructor(t,{version:e,...n}){super(t,n),Object.assign(this,{version:e})}}},5038:function(t,e,n){"use strict";var o,r;n.d(e,{g:function(){return o}}),(r=o||(o={})).V2="2",r.V3="3"},8805:function(t,e,n){"use strict";n.d(e,{l:function(){return site}});var o=n(9290),r=n(3394),a=n(3454);let s={squareup:{production:"https://squareup.com",staging:"https://squareupstaging.com",development:()=>a.env.SQUAREUP_SITE||a.env.NEXT_PUBLIC_SQUAREUP_SITE||"https://squareup.com.".concat(a.env.HOSTNAME||a.env.NEXT_PUBLIC_HOSTNAME,".local")},app:{production:"https://app.squareup.com",staging:"https://app.squareupstaging.com",development:()=>a.env.SQUAREUP_SITE||a.env.NEXT_PUBLIC_SQUAREUP_SITE||"https://squareup.com.".concat(a.env.HOSTNAME||a.env.NEXT_PUBLIC_HOSTNAME,".local")}};function site(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.ZP,a=null===(e=s[t])||void 0===e?void 0:e[n];if(!a)throw new r.Z('sites: "'.concat(t,'" site not found for "').concat(n,'" environment'));return"function"==typeof a?a():a}},5347:function(){},1777:function(){},4017:function(){},9905:function(){}}]);